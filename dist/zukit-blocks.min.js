(function () {
  'use strict';

  function _defineProperty(obj, key, value) {
    if (key in obj) {
      Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
      });
    } else {
      obj[key] = value;
    }

    return obj;
  }

  function _extends() {
    _extends = Object.assign || function (target) {
      for (var i = 1; i < arguments.length; i++) {
        var source = arguments[i];

        for (var key in source) {
          if (Object.prototype.hasOwnProperty.call(source, key)) {
            target[key] = source[key];
          }
        }
      }

      return target;
    };

    return _extends.apply(this, arguments);
  }

  function ownKeys(object, enumerableOnly) {
    var keys = Object.keys(object);

    if (Object.getOwnPropertySymbols) {
      var symbols = Object.getOwnPropertySymbols(object);
      if (enumerableOnly) symbols = symbols.filter(function (sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
      keys.push.apply(keys, symbols);
    }

    return keys;
  }

  function _objectSpread2(target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i] != null ? arguments[i] : {};

      if (i % 2) {
        ownKeys(Object(source), true).forEach(function (key) {
          _defineProperty(target, key, source[key]);
        });
      } else if (Object.getOwnPropertyDescriptors) {
        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
      } else {
        ownKeys(Object(source)).forEach(function (key) {
          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
        });
      }
    }

    return target;
  }

  function _objectWithoutPropertiesLoose(source, excluded) {
    if (source == null) return {};
    var target = {};
    var sourceKeys = Object.keys(source);
    var key, i;

    for (i = 0; i < sourceKeys.length; i++) {
      key = sourceKeys[i];
      if (excluded.indexOf(key) >= 0) continue;
      target[key] = source[key];
    }

    return target;
  }

  function _objectWithoutProperties(source, excluded) {
    if (source == null) return {};

    var target = _objectWithoutPropertiesLoose(source, excluded);

    var key, i;

    if (Object.getOwnPropertySymbols) {
      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);

      for (i = 0; i < sourceSymbolKeys.length; i++) {
        key = sourceSymbolKeys[i];
        if (excluded.indexOf(key) >= 0) continue;
        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
        target[key] = source[key];
      }
    }

    return target;
  }

  function _slicedToArray(arr, i) {
    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();
  }

  function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
  }

  function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
  }

  function _arrayWithHoles(arr) {
    if (Array.isArray(arr)) return arr;
  }

  function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
  }

  function _iterableToArrayLimit(arr, i) {
    if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return;
    var _arr = [];
    var _n = true;
    var _d = false;
    var _e = undefined;

    try {
      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
        _arr.push(_s.value);

        if (i && _arr.length === i) break;
      }
    } catch (err) {
      _d = true;
      _e = err;
    } finally {
      try {
        if (!_n && _i["return"] != null) _i["return"]();
      } finally {
        if (_d) throw _e;
      }
    }

    return _arr;
  }

  function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(o);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
  }

  function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;

    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];

    return arr2;
  }

  function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }

  function _nonIterableRest() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }

  function createCommonjsModule(fn, basedir, module) {
  	return module = {
  		path: basedir,
  		exports: {},
  		require: function (path, base) {
  			return commonjsRequire(path, (base === undefined || base === null) ? module.path : base);
  		}
  	}, fn(module, module.exports), module.exports;
  }

  function commonjsRequire () {
  	throw new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');
  }

  var classnames = createCommonjsModule(function (module) {
  /*!
    Copyright (c) 2017 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  */
  /* global define */

  (function () {

  	var hasOwn = {}.hasOwnProperty;

  	function classNames () {
  		var classes = [];

  		for (var i = 0; i < arguments.length; i++) {
  			var arg = arguments[i];
  			if (!arg) continue;

  			var argType = typeof arg;

  			if (argType === 'string' || argType === 'number') {
  				classes.push(arg);
  			} else if (Array.isArray(arg) && arg.length) {
  				var inner = classNames.apply(null, arg);
  				if (inner) {
  					classes.push(inner);
  				}
  			} else if (argType === 'object') {
  				for (var key in arg) {
  					if (hasOwn.call(arg, key) && arg[key]) {
  						classes.push(key);
  					}
  				}
  			}
  		}

  		return classes.join(' ');
  	}

  	if ( module.exports) {
  		classNames.default = classNames;
  		module.exports = classNames;
  	} else {
  		window.classNames = classNames;
  	}
  }());
  });

  var _ = lodash;
  var __ = wp.i18n.__;
  var _wp$components = wp.components,
      Path = _wp$components.Path,
      G = _wp$components.G,
      SVG = _wp$components.SVG;
  var _wp$blocks = wp.blocks,
      getCategories = _wp$blocks.getCategories,
      setCategories = _wp$blocks.setCategories,
      registerBlockCollection = _wp$blocks.registerBlockCollection; // Gets JSON data from PHP

  function externalData(key) {
    var defaultValues = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

    var _ref = window[key] || {},
        _ref$data = _ref.data,
        data = _ref$data === void 0 ? {} : _ref$data;

    return _.isEmpty(defaultValues) ? data : _.defaults(data, defaultValues);
  } // Just a more familiar name

  var mergeClasses = classnames; // Checks if value can be converted to Number

  function isNum(n) {
    return !_.isNaN(parseFloat(n)) && isFinite(n);
  } // convert argument to Boolean value
  // works for true, false, 0, 1, "true", "false", "TRUE", "FALSE", "0", "1", undefined

  function toBool(val) {
    var stringOrNull = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var num;
    var value = val != null && (!_.isNaN(num = +val) ? !!num : !!String(val).toLowerCase().replace(!!0, ''));
    return stringOrNull ? value ? String(value) : null : value;
  }
  function toRange(num, min, max) {
    var useMinOnErr = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
    var value = _.isNaN(+num) ? useMinOnErr ? min : max : num;
    return _.clamp(_.round(value), min, max);
  } // Create key for react components from 'value' or other params

  function getKey(value, more) {
    var source = _.isString(value) || isNum(value) ? String(value) : String(more);
    var hash = 0,
        i;

    for (i = 0; i < source.length; i++) {
      hash = (hash << 5) - hash + source.charCodeAt(i);
      hash |= 0; // Convert to 32bit integer
    }

    return String(hash);
  }
  // Ensures the ids array contains numbers

  function getIds(items) {
    var asString = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    // always ensure the ids array contains numbers.
    // And remove all elements with "empty" value (undefined, null)
    if (!items || items.length === 0) return asString ? '' : [];

    var ids = _.compact(_.map(items, function (value) {
      return value && value.id && parseInt(value.id, 10);
    }));

    return asString ? _.join(ids, ',') : ids;
  }

  function toJSON(obj) {
    if (obj) {
      try {
        obj = JSON.stringify(obj);
      } catch (err) {
        obj = '{}';
      }
    }

    return obj || '{}';
  } // Add error value (if present) to the message, converting any object to a string

  function messageWithError(message) {
    var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    if (_.isNil(value)) return message;
    value = _.isArray(value) || _.isPlainObject(value) ? toJSON(value) : String(value);
    value = value.replace(/([{|}])/g, ' $1 ').replace(/,\s*/g, ',  ').replace(/"([^"]+)":/g, '<b>$1</b>: ');
    return message.replace(/[:|.]\s*$/g, '') + ": <span class=\"zukit-data\">".concat(value, "</span>");
  } // Returns SVG with a reference to an already loaded SVG set

  function svgRef(id) {
    var icon = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var moreClasses = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
    var iconsSize = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 24;
    var size = iconsSize; // change viewBox values according to Icons Set

    return /*#__PURE__*/React.createElement("svg", {
      className: classnames('zu-svg', {
        icon: icon
      }, "icon-".concat(id), moreClasses),
      role: "img",
      "aria-labelledby": "title",
      viewBox: "0 0 ".concat(size, " ").concat(size),
      preserveAspectRatio: "xMidYMin slice"
    }, /*#__PURE__*/React.createElement("use", {
      xlinkHref: "#".concat(id)
    }));
  }
  function hexToRGB(hex) {
    var asObject = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    var rgb = result ? {
      r: parseInt(result[1], 16),
      g: parseInt(result[2], 16),
      b: parseInt(result[3], 16)
    } : null;
    return rgb ? asObject ? rgb : "rgb(".concat(rgb.r, ",").concat(rgb.g, ",").concat(rgb.b, ")") : null;
  }
  function hexToRGBA(hex, alpha) {
    var asObject = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    var rgb = hexToRGB(hex, true);
    if (rgb === null) return null;

    var rgba = _.set(_objectSpread2({}, rgb), 'a', alpha);

    return asObject ? rgba : "rgba(".concat(rgba.r, ",").concat(rgba.g, ",").concat(rgba.b, ",").concat(rgba.a, ")");
  } // Some useful data -----------------------------------------------------------]

  var emptyGif = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';

  var _externalData = externalData('zukit_jsdata'),
      _externalData$colors = _externalData.colors,
      zukitColors = _externalData$colors === void 0 ? {} : _externalData$colors; // Returns one of predefined in SASS files colors


  function getColor(key) {
    return _.get(zukitColors, key, '#cc1818');
  } // Brand assets ---------------------------------------------------------------]

  var brandAssets = {
    namespace: 'zu',
    slug: 'zu-blocks',
    color: getColor('violet'),
    icon: null,
    title: __('Zu Blocks', 'zukit')
  };
  brandAssets.icon = /*#__PURE__*/React.createElement(SVG, {
    width: "24",
    height: "24",
    viewBox: "0 0 24 24",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React.createElement(G, null, /*#__PURE__*/React.createElement(Path, {
    d: "M15.22,6.873 C15.22,6.873 14.383,8.096 13.914,12.049 C13.445,16.006 17.266,15.5 17.266,15.5 Q19.264,15.312 19.264,13.224 C19.264,13.224 19.172,6.516 19.264,6.873 C20.766,9.109 23.242,6.873 23.242,6.873 L23.242,13.993 Q23.242,16.279 21.737,17.422 Q20.231,18.565 17.242,18.565 Q14.42,18.27 12.914,17.127 C12.914,17.127 11.336,16.393 10.367,13.908 C9.107,10.676 11.242,6.873 11.242,6.873 z",
    fill: brandAssets.color
  }), /*#__PURE__*/React.createElement(Path, {
    d: "M7.448,14.858 C8.266,16.469 11.164,15.236 11.164,15.236 L17.242,18.565 L0.758,18.565 L6.08,10.203 L1.47,10.203 C1.47,10.203 3.141,7.828 1.47,6.873 C0.922,6.844 12.742,6.873 12.742,6.873 C12.742,6.873 6.256,12.508 7.448,14.858 z",
    fill: brandAssets.color
  }))); // Register ZU blocks category (or any other if 'categoryData' is presented)

  function registerCategory() {
    var categoryData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
    var category = _.isEmpty(categoryData) ? {
      slug: brandAssets.slug,
      title: brandAssets.title,
      icon: brandAssets.icon
    } : categoryData;
    setCategories([category].concat(_toConsumableArray(getCategories().filter(function (_ref2) {
      var slug = _ref2.slug;
      return slug !== category.slug;
    }))));
  }
  function registerCollection() {
    var collectionData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
    var collection = _.isEmpty(collectionData) ? {
      namespace: brandAssets.namespace,
      title: brandAssets.title,
      icon: brandAssets.icon
    } : collectionData;

    if (typeof registerBlockCollection === 'function') {
      registerBlockCollection(collection.namespace, collection);
      return true;
    }

    return false;
  } // Subset of functions for 'zukit-blocks'

  var blocksSet = {
    registerCategory: registerCategory,
    registerCollection: registerCollection,
    externalData: externalData,
    mergeClasses: mergeClasses,
    hexToRGB: hexToRGB,
    hexToRGBA: hexToRGBA,
    isNum: isNum,
    toBool: toBool,
    toRange: toRange,
    getKey: getKey,
    getIds: getIds,
    getColor: getColor,
    toJSON: toJSON,
    svgRef: svgRef,
    emptyGif: emptyGif,
    brandAssets: brandAssets
  };

  // WordPress dependencies
  var _$1 = lodash;
  var _wp = wp,
      apiFetch = _wp.apiFetch; // Internal dependencies
  var cacheKey = 'cache';
  var apiBaseURL = '/zukit/v1/'; // restRouter serves to identify the plugin that currently uses the REST API,
  // since all plugins inherit the same Zukit_plugin class and identification
  // is required to determine which of the active plugins should respond to ajax requests.
  // Therefore, we automatically add the 'router' param to all API request.

  var restRouter = null; // Ajax actions and options update --------------------------------------------]

  function serializeData(data) {
    var cache = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var skip = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

    // remove all elements with "empty" value (undefined, null)
    var obj = _$1.omitBy(data, _$1.isNil); // check for cacheKey in object and then remove it (skip) from serialization


    if (_$1.has(obj, cacheKey)) {
      cache = obj[cacheKey];
      skip.push(cacheKey);
    }

    var str = [];

    for (var p in obj) {
      if (_$1.has(obj, p) && !_$1.includes(skip, p)) {
        // process array as JSON if presented in value
        var value = _$1.isArray(obj[p]) ? toJSON(obj[p]) : obj[p];
        str.push("".concat(encodeURIComponent(p), "=").concat(encodeURIComponent(value)));
      }
    } // Automatically add the 'router' param to all API request


    str.push("router=".concat(encodeURIComponent(restRouter)));

    if (cache) {
      var random = Math.floor(Math.random() * 1000000);
      str.push("q=".concat(random));
    }

    return str.join('&');
  } // Check URL and transform it if needed


  function requestURL(url, options) {
    var picked = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
    // extend url with API base
    // and remove any leading and trailing slashes
    var requestUrl = !_$1.startsWith(url, apiBaseURL) ? apiBaseURL + url.replace(/^\\+|\\+$/g, '') : url.replace(/\\+$/g, ''); // maybe pick only some keys

    var urlOptions = !_$1.isEmpty(picked) ? _$1.pick(options, picked) : options; // convert data to query string for requests without BODY

    if (!_$1.isEmpty(urlOptions)) requestUrl = "".concat(requestUrl, "/?").concat(serializeData(urlOptions, urlOptions.cache));
    return requestUrl;
  } // create GET API Promise with Route and Options, then execute it and process results with callbacks

  function fetchAndCatchWithOptions(_ref4) {
    var route = _ref4.route,
        options = _ref4.options,
        picked = _ref4.picked,
        onSuccess = _ref4.onSuccess,
        onError = _ref4.onError;
    apiFetch({
      path: requestURL(route, options, picked)
    }).then(function (data) {
      if (_$1.isFunction(onSuccess)) onSuccess(data);
    }).catch(function (error) {
      if (_$1.isFunction(onError)) onError(error);
    });
  } // create POST API Promise with Route and Options, then execute it and process results with callbacks

  function postAndCatchWithOptions(_ref5) {
    var route = _ref5.route,
        options = _ref5.options,
        picked = _ref5.picked,
        onSuccess = _ref5.onSuccess,
        onError = _ref5.onError;
    var method = 'POST';

    var requestOptions = _objectSpread2(_objectSpread2({}, options), {}, {
      router: restRouter
    });

    apiFetch({
      path: requestURL(route),
      method: method,
      data: !_$1.isEmpty(picked) ? _$1.pick(requestOptions, picked) : requestOptions
    }).then(function (data) {
      if (_$1.isFunction(onSuccess)) onSuccess(data);
    }).catch(function (error) {
      if (_$1.isFunction(onError)) onError(error);
    });
  } // Subset of functions for 'zukit-blocks'

  var blocksSet$1 = {
    serializeData: serializeData,
    requestURL: requestURL,
    fetchAndCatchWithOptions: fetchAndCatchWithOptions,
    postAndCatchWithOptions: postAndCatchWithOptions
  };

  // Conditional Wrap Component
  // condition ? wrap(children) : children
  var ConditionalWrap = function ConditionalWrap(_ref) {
    var className = _ref.className,
        condition = _ref.condition,
        elseDiv = _ref.elseDiv,
        wrappingDiv = _ref.wrappingDiv,
        wrappingLink = _ref.wrappingLink,
        wrap = _ref.wrap,
        children = _ref.children,
        additionalProps = _objectWithoutProperties(_ref, ["className", "condition", "elseDiv", "wrappingDiv", "wrappingLink", "wrap", "children"]);

    // maybe Wrapping Component is <div>
    var wrappingComponent = !wrappingDiv ? null : /*#__PURE__*/React.createElement("div", _extends({
      className: className
    }, additionalProps), children); // maybe Wrapping Component is <a>

    if (wrappingLink) wrappingComponent = /*#__PURE__*/React.createElement("a", _extends({
      className: className
    }, additionalProps), children); // if wrappingComponent is still undefined then use "wrap" as component

    if (!wrappingComponent) {
      var Wrap = wrap;
      wrappingComponent = /*#__PURE__*/React.createElement(Wrap, _extends({
        className: className
      }, additionalProps), children);
    }

    return condition ? wrappingComponent : elseDiv ? /*#__PURE__*/React.createElement("div", {
      className: className
    }, children) : children;
  };

  // WordPress dependencies
  var _lodash = lodash,
      map = _lodash.map,
      defaults = _lodash.defaults,
      upperFirst = _lodash.upperFirst,
      isFunction = _lodash.isFunction,
      isPlainObject = _lodash.isPlainObject,
      every = _lodash.every,
      pick = _lodash.pick;
  var _wp$components$1 = wp.components,
      BaseControl = _wp$components$1.BaseControl,
      Tooltip = _wp$components$1.Tooltip,
      Button = _wp$components$1.Button,
      ButtonGroup = _wp$components$1.ButtonGroup; // Internal dependencies

  var cname = 'zukit-select-item';
  var buttonPossibleProps = ['href', 'target', 'disabled', 'icon', 'iconSize', 'shortcut', 'onMouseDown', 'isPrimary', 'isTertiary', 'isPressed', 'isBusy', 'isDefault', 'isLink', 'isDestructive'];

  var SelectItemControl = function SelectItemControl(_ref) {
    var className = _ref.className,
        _ref$columns = _ref.columns,
        columns = _ref$columns === void 0 ? 2 : _ref$columns,
        _ref$isSecondary = _ref.isSecondary,
        isSecondary = _ref$isSecondary === void 0 ? true : _ref$isSecondary,
        _ref$isSmall = _ref.isSmall,
        isSmall = _ref$isSmall === void 0 ? true : _ref$isSmall,
        withoutControl = _ref.withoutControl,
        recap = _ref.recap,
        options = _ref.options,
        selectedItem = _ref.selectedItem,
        transformValue = _ref.transformValue,
        beforeItem = _ref.beforeItem,
        afterItem = _ref.afterItem,
        label = _ref.label,
        help = _ref.help,
        buttonStyle = _ref.buttonStyle,
        buttonClass = _ref.buttonClass,
        withLabels = _ref.withLabels,
        withTooltip = _ref.withTooltip,
        _onClick = _ref.onClick,
        additionalProps = _objectWithoutProperties(_ref, ["className", "columns", "isSecondary", "isSmall", "withoutControl", "recap", "options", "selectedItem", "transformValue", "beforeItem", "afterItem", "label", "help", "buttonStyle", "buttonClass", "withLabels", "withTooltip", "onClick"]);

    var makeItem = function makeItem(_ref2) {
      var _mergeClasses;

      var label = _ref2.label,
          value = _ref2.value,
          style = _ref2.style,
          isDisabled = _ref2.isDisabled;
      return /*#__PURE__*/React.createElement(ConditionalWrap, {
        condition: withTooltip,
        wrap: Tooltip,
        text: label,
        key: getKey(value, label)
      }, /*#__PURE__*/React.createElement("div", {
        key: getKey(value, label),
        className: mergeClasses("".concat(cname, "__button-wrapper"), "".concat(cname, "__").concat(value), (_mergeClasses = {}, _defineProperty(_mergeClasses, 'is-selected', selectedItem === value && !isDisabled), _defineProperty(_mergeClasses, 'is-disabled', isDisabled), _mergeClasses))
      }, /*#__PURE__*/React.createElement(Button, _extends({
        className: mergeClasses("".concat(cname, "__button"), buttonClass, "".concat(cname, "__").concat(value), _defineProperty({}, 'is-selected', selectedItem === value && !isDisabled)),
        isSecondary: isSecondary,
        isSmall: isSmall,
        onClick: function onClick() {
          return isDisabled ? false : _onClick(value);
        },
        style: style || buttonStyle
      }, pick(additionalProps, buttonPossibleProps)), isFunction(transformValue) ? transformValue(value) : value), withLabels && /*#__PURE__*/React.createElement("div", {
        className: "block-editor-block-styles__item-label"
      }, label)));
    };

    var defaultRecapOptions = {
      label: upperFirst(selectedItem),
      value: selectedItem,
      style: null,
      isDisabled: true
    };
    var recapOptions = isPlainObject(recap) ? defaults(recap, defaultRecapOptions) : defaultRecapOptions;
    var selectOptions = every(options, function (o) {
      return isPlainObject(o);
    }) ? options : map(options, function (o) {
      return {
        label: upperFirst(o),
        value: o
      };
    });
    return /*#__PURE__*/React.createElement(ConditionalWrap, {
      condition: !withoutControl,
      elseDiv: true,
      wrap: BaseControl,
      className: mergeClasses(cname, "__".concat(columns, "columns"), 'components-base-control', className),
      label: label,
      help: help
    }, /*#__PURE__*/React.createElement(ButtonGroup, {
      "aria-label": label
    }, beforeItem, recap && makeItem(recapOptions), map(selectOptions, makeItem), afterItem));
  };

  // WordPress dependencies
  var _wp$element = wp.element,
      useContext = _wp$element.useContext,
      createContext = _wp$element.createContext;
  var createHigherOrderComponent = wp.compose.createHigherOrderComponent; // Context to make Notices be accessible by many components in the tree,
  // and at different nesting levels

  var NoticesContext = createContext();
  NoticesContext.displayName = 'ZukitNoticesContext';
  var withNoticesContext = createHigherOrderComponent(function (WrappedComponent) {
    return function (props) {
      return /*#__PURE__*/React.createElement(NoticesContext.Consumer, null, function (context) {
        return /*#__PURE__*/React.createElement(WrappedComponent, _extends({
          noticeOperations: context
        }, props));
      });
    };
  }, 'withZukitNoticesContext');

  // WordPress dependencies
  var _lodash$1 = lodash,
      isArray = _lodash$1.isArray,
      isEmpty = _lodash$1.isEmpty,
      isNil = _lodash$1.isNil,
      map$1 = _lodash$1.map,
      pull = _lodash$1.pull,
      split = _lodash$1.split,
      join = _lodash$1.join,
      includes = _lodash$1.includes,
      has = _lodash$1.has;
  var __$1 = wp.i18n.__;
  var ENTER = wp.keycodes.ENTER;
  var compose = wp.compose.compose;
  var _wp$components$2 = wp.components,
      BaseControl$1 = _wp$components$2.BaseControl,
      Button$1 = _wp$components$2.Button,
      TextControl = _wp$components$2.TextControl,
      Tooltip$1 = _wp$components$2.Tooltip;
  var _wp$element$1 = wp.element,
      useState = _wp$element$1.useState,
      useCallback = _wp$element$1.useCallback,
      useMemo = _wp$element$1.useMemo;
  var _wp$url = wp.url,
      isEmail = _wp$url.isEmail,
      isURL = _wp$url.isURL; // Internal dependencies

  var cprefix = 'zukit-list-input';
  var closeIcon = 'no-alt';

  var isKind = function isKind(kind, value) {
    // https://stackoverflow.com/questions/4338267/validate-phone-number-with-javascript
    var phoneRegex = /^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/g;
    if (isNil(kind)) return true;
    if (kind === 'email') return isEmail(value);
    if (kind === 'url') return isURL(value);
    if (kind === 'tel' || kind === 'phone') return phoneRegex.test(value); // otherwise any string that we use as a Regular Expression

    var re = new RegExp(kind);
    return re.test(value);
  };

  var messages = {
    duplicate: __$1('Duplicates are not allowed', 'zukit'),
    email: __$1('It does not look like a valid email.', 'zukit'),
    url: __$1('It does not look like a URL.', 'zukit'),
    tel: __$1('It does not look like a phone number.', 'zukit'),
    regex: __$1('It does not look like a valid input.', 'zukit')
  };

  var messageByKind = function messageByKind(kind, value) {
    if (kind === 'phone') kind = 'tel';
    var msg = has(messages, kind) ? messages[kind] : messages.regex;
    return messageWithError(msg, value);
  };

  var ListInputControl = function ListInputControl(_ref) {
    var _ref$separator = _ref.separator,
        separator = _ref$separator === void 0 ? ',' : _ref$separator,
        label = _ref.label,
        help = _ref.help,
        inputLabel = _ref.inputLabel,
        strict = _ref.strict,
        value = _ref.value,
        onChange = _ref.onChange,
        noticeOperations = _ref.noticeOperations;
    var createNotice = noticeOperations.createNotice;

    var _useState = useState(''),
        _useState2 = _slicedToArray(_useState, 2),
        currentItem = _useState2[0],
        setCurrentItem = _useState2[1];

    var _useState3 = useState(false),
        _useState4 = _slicedToArray(_useState3, 2),
        editMode = _useState4[0],
        setEditMode = _useState4[1]; // convert string value to array if needed


    var items = useMemo(function () {
      return isArray(value) ? value : isEmpty(value) ? [] : split(value, separator);
    }, [value, separator]); // remove an item by its value

    var onRemoveItem = useCallback(function (value) {
      var wasCount = items.length;
      pull(items, value);

      if (items.length < wasCount) {
        onChange(join(items, separator));
      }
    }, [items, onChange, separator]); // clean the list

    var onReset = useCallback(function () {
      onChange('');
    }, [onChange]); // add an item to the list (only unique values are allowed)

    var onAddItem = useCallback(function () {
      if (!includes(items, currentItem)) {
        if (isKind(strict, currentItem)) {
          items.push(currentItem);
          onChange(join(items, separator));
          setCurrentItem('');
        } else {
          // Can be one of: success, info, warning, error
          createNotice({
            status: 'error',
            content: messageByKind(strict, currentItem),
            isDismissible: true,
            __unstableHTML: true
          });
        }
      } else {
        createNotice({
          status: 'warning',
          content: messageWithError(messages.duplicate, currentItem),
          isDismissible: true,
          __unstableHTML: true
        });
      }
    }, [currentItem, items, onChange, separator, strict, createNotice]); // add an item on ENTER key pressed

    var onKeyDown = useCallback(function (event) {
      var keyCode = event.keyCode;

      if (keyCode === ENTER) {
        onAddItem();
      }
    }, [onAddItem]);
    var isDesc = label || help;
    return /*#__PURE__*/React.createElement(BaseControl$1, {
      className: cprefix
    }, isDesc && /*#__PURE__*/React.createElement("div", {
      className: "__desc"
    }, label && /*#__PURE__*/React.createElement("label", {
      className: "components-base-control__label"
    }, label), help && /*#__PURE__*/React.createElement("p", {
      className: "components-base-control__help"
    }, help)), /*#__PURE__*/React.createElement("div", {
      className: "__list"
    }, map$1(items, function (val) {
      return /*#__PURE__*/React.createElement("div", {
        className: "__list-item",
        key: getKey(val)
      }, /*#__PURE__*/React.createElement("span", null, val), /*#__PURE__*/React.createElement(Tooltip$1, {
        text: __$1('Remove', 'zukit'),
        position: "top center"
      }, /*#__PURE__*/React.createElement(Button$1, {
        className: "__remove",
        isSecondary: true,
        icon: closeIcon,
        onClick: function onClick() {
          return onRemoveItem(val);
        }
      })));
    }), !editMode && /*#__PURE__*/React.createElement(Button$1, {
      className: "__edit __plugin_actions __auto admin-blue",
      icon: "admin-settings",
      isSecondary: true,
      onClick: function onClick() {
        return setEditMode(true);
      }
    }, __$1('Modify', 'zukit'))), editMode && /*#__PURE__*/React.createElement("div", {
      className: "components-animate__appear is-from-top __input"
    }, /*#__PURE__*/React.createElement(TextControl, {
      label: inputLabel || __$1('Enter new item', 'zukit'),
      value: currentItem,
      onChange: setCurrentItem,
      onKeyDown: onKeyDown
    }), /*#__PURE__*/React.createElement(Button$1, {
      className: "__add __plugin_actions admin-blue",
      icon: "tag",
      isSecondary: true,
      onClick: onAddItem
    }, __$1('Add', 'zukit')), /*#__PURE__*/React.createElement(Button$1, {
      className: "__reset __plugin_actions magenta",
      isSecondary: true,
      icon: "trash",
      onClick: onReset
    }, __$1('Reset All', 'zukit'))));
  };

  var listInputControl = compose([withNoticesContext])(ListInputControl);

  // WordPress dependencies
  var _lodash$2 = lodash,
      isNil$1 = _lodash$2.isNil;
  var __$2 = wp.i18n.__;
  var _wp$components$3 = wp.components,
      Button$2 = _wp$components$3.Button,
      TextControl$1 = _wp$components$3.TextControl,
      Tooltip$2 = _wp$components$3.Tooltip;
  var _wp$element$2 = wp.element,
      useCallback$1 = _wp$element$2.useCallback,
      useState$1 = _wp$element$2.useState; // Internal dependencies

  var labels = {
    show: __$2('Show Password', 'zukit'),
    hide: __$2('Hide Password', 'zukit'),
    clear: __$2('Clear', 'zukit')
  };

  var isKind$1 = function isKind(kind, value) {
    if (value === '' || isNil$1(kind)) return true;
    if (kind === 'number') return /^[0-9]+$/g.test(value);
    if (kind === 'email') return /^[a-zA-Z0-9._@-]+$/g.test(value);
    if (kind === 'url') return /^[.a-zA-Z0-9-]+$/g.test(value);
    if (kind === 'tel' || kind === 'phone') return /^[0-9()+-\s]+$/g.test(value); // otherwise any string that we use as a Regular Expression

    var re = new RegExp(kind);
    return re.test(value);
  };

  var AdvTextControl = function AdvTextControl(_ref) {
    var className = _ref.className,
        isPassword = _ref.isPassword,
        _ref$showTooltip = _ref.showTooltip,
        showTooltip = _ref$showTooltip === void 0 ? true : _ref$showTooltip,
        withoutClear = _ref.withoutClear,
        label = _ref.label,
        value = _ref.value,
        help = _ref.help,
        type = _ref.type,
        strict = _ref.strict,
        onChange = _ref.onChange;

    var _useState = useState$1(false),
        _useState2 = _slicedToArray(_useState, 2),
        visible = _useState2[0],
        setVisible = _useState2[1];

    var controlType = isPassword ? visible ? 'text' : 'password' : type || 'text';
    var controlIcon = isPassword ? visible ? 'hidden' : 'visibility' : 'no-alt';
    var controlTooltip = isPassword ? visible ? labels.hide : labels.show : labels.clear;
    var onClick = useCallback$1(function () {
      return isPassword ? setVisible(!visible) : onChange('');
    }, [isPassword, visible, onChange]);
    var onValidatedChange = useCallback$1(function (val) {
      if (isKind$1(strict, val)) onChange(val);
    }, [strict, onChange]);
    return /*#__PURE__*/React.createElement("div", {
      className: mergeClasses('components-base-control', 'zukit-text-control', className)
    }, /*#__PURE__*/React.createElement(TextControl$1, {
      type: controlType,
      label: label,
      help: help,
      value: value || '',
      onChange: onValidatedChange
    }), (isPassword || !withoutClear) && /*#__PURE__*/React.createElement(ConditionalWrap, {
      wrap: Tooltip$2,
      condition: showTooltip,
      text: controlTooltip,
      position: "top center"
    }, /*#__PURE__*/React.createElement(Button$2, {
      className: "__exclude",
      icon: controlIcon,
      onClick: onClick
    })));
  };

  // Components

  var components = /*#__PURE__*/Object.freeze({
    __proto__: null,
    ConditionalWrap: ConditionalWrap,
    SelectItemControl: SelectItemControl,
    ListInputControl: listInputControl,
    AdvTextControl: AdvTextControl
  });

  wp.zukit = {
    fetch: blocksSet$1,
    utils: blocksSet,
    components: components
  };

}());

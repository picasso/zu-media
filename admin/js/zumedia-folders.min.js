var $m1=function(e){var t={mods:{ignoreNext:!1,consoleDir:!1,forseNil:!1},colors:{same:!1,trace:!1,info:!1,data:!1,render:!1,use:!1}},n="#a79635",i="#e56a17",a="#1f993f",r="#0091ff",o="#0070c9",d="#a79635",l="#e50039",s="#cc0096",c="#ffffff",u="#ffd580",f="#e50039",p="#ff2020";function m(n,i,a){var r=n[0],o=n[1]||"",d=n[2]||"",l=i[0],m=i[1]||"",v=i[2]||null,h=t.colors.info?console.info:console.log;r.startsWith("?")&&(l=p),r.startsWith("!")&&(l=s),r.startsWith("#")&&(v=f,m=u,l=c),t.colors.same&&(m=l);var g=v?`font-weight: normal; padding: 3px 0 3px 3px; background: ${v}; color: ${l}`:"font-weight: normal; color: "+l,$=v?`font-weight: bold; padding: 3px 0 3px 3px; background: ${v}; color: ${m}`:"font-weight: bold; color: "+m,b=v?`font-weight: normal; padding: 3px 10px 3px 0; background: ${v}; color: ${l}`:"font-weight: normal; color: "+l;r=v?r.trim():r,o=v?o.trim():o,d=v?d.trim():d,r.startsWith("!")&&(r=r.replace(/^!/,""),g=g.replace("normal","bold"),b=b.replace("normal","bold"),h=console.info),r.startsWith("?")&&(r=r.replace(/^\?/,""),g=g.replace("normal","bold"),b=b.replace("normal","bold")),r.startsWith("#")&&(r=r.replace(/^#/," ★★★ ").replace(/[.]+$/,""),g=g.replace("normal","bold"),b=b.replace("normal","bold"),o?d&&(d+=" ★★★ "):r+=" ★★★ "),t.mods.forseNil||void 0!==a?t.mods.consoleDir?(o&&m?h("%c%s%c%s%c%s%c",g,r,$,o,g,d,v?b:""):h("%c%s ",g,r),console.dir(a)):o&&m?h("%c%s%c%s%c%s%c",g,r,$,o,g,d,v?b:"",a):h("%c%s ",g,r,a):o&&m?h("%c%s%c%s%c%s%c",g,r,$,o,g,d,v?b:""):h("%c%s ",g,r),t.colors=e.mapValues(t.colors,(function(){return!1})),t.mods=e.mapValues(t.mods,(function(){return!1}))}return{log:function(s,c){if(e.isString(s)||void 0!==c||(c=s,s="!"),s){s=s.trim();var u=[(v=n,t.colors.info?o:t.colors.data?d:t.colors.trace?l:t.colors.render?a:t.colors.use?r:v),i,null],f=/\[\s*([^\]]+)]/i;if(f.test(s)){var p=f.exec(s);m([s.replace(p[0],"[ "),p[1]," ]"],u,c)}else m([s],u,c)}var v}}},$m2=function(e){var t="mfs-",n=24,i={plus:"M17,12.981 L17,11 L13,11 L13,7 L11,7 L11,11 L7,11 L7,13 L11,13 L11,17 L13,17 L13,13 L17,13 z M17.433,5.002 Q18.053,5.002 18.526,5.475 Q19,5.949 19,6.569 L19,17.433 Q19,18.053 18.526,18.526 Q18.053,19 17.433,19 L6.568,19 Q5.912,19 5.456,18.544 Q5,18.088 5,17.432 L5,6.568 Q5,5.912 5.456,5.456 Q5.912,5 6.568,5 L17.433,5 z",minus:"M17,13 L17,11 L7,11 L7,13 L17,13 z M17.433,5.002 Q18.053,5.002 18.526,5.475 Q19,5.949 19,6.569 L19,17.433 Q19,18.053 18.526,18.526 Q18.053,19 17.433,19 L6.568,19 Q5.912,19 5.456,18.544 Q5,18.088 5,17.432 L5,6.568 Q5,5.912 5.456,5.456 Q5.912,5 6.568,5 L17.433,5 z",closed:"M9.984 3.984l2.016 2.016h8.016q0.797 0 1.383 0.609t0.586 1.406v9.984q0 0.797-0.586 1.406t-1.383 0.609h-16.031q-0.797 0-1.383-0.609t-0.586-1.406v-12q0-0.797 0.586-1.406t1.383-0.609h6z",opened:"M20.016 18v-9.984h-16.031v9.984h16.031zM20.016 6q0.797 0 1.383 0.609t0.586 1.406v9.984q0 0.797-0.586 1.406t-1.383 0.609h-16.031q-0.797 0-1.383-0.609t-0.586-1.406v-12q0-0.797 0.586-1.406t1.383-0.609h6l2.016 2.016h8.016z",home:{size:80,colors:[null,"#DA2C41"],paths:["M26,23.996 C29.308,23.996 32,26.688 32,29.996 C32,33.304 29.308,35.996 26,35.996 C22.692,35.996 20,33.304 20,29.996 C20,26.688 22.692,23.996 26,23.996 z M26,19.996 C20.476,19.996 16,24.472 16,29.996 C16,35.52 20.476,39.996 26,39.996 C31.524,39.996 36,35.52 36,29.996 C36,24.472 31.524,19.996 26,19.996 z M55.996,35.996 C63.996,35.996 67.996,59.996 67.996,59.996 L11.996,59.996 C11.996,59.996 16,43.996 23.999,43.996 C32.002,43.996 31.998,47.996 37.998,47.996 C43.998,47.996 47.997,35.996 55.996,35.996 z M55.996,39.996 C53.476,39.996 51.113,42.584 48.605,45.332 C45.761,48.456 42.546,51.996 37.994,51.996 C34.139,51.996 31.902,50.708 30.115,49.676 C28.495,48.736 27.219,47.996 23.995,47.996 C21.767,47.996 19.284,51.864 17.547,56 L63.112,56 C61.076,47.212 57.797,40.2 55.996,39.996 z M72,64.001 L72.012,16 L8,16 L8,64.001 L72,64.001 z M80,16 L80,64.001 C80,68.417 76.416,72 72,72 L8,72 C3.584,72 0,68.417 0,64.001 L0,16 C0,11.584 3.584,8 8,8 L72,8 C76.416,8 80,11.584 80,16 z","M26.022,38.702 C21.225,38.702 17.335,34.813 17.335,30.016 C17.335,25.218 21.225,21.329 26.022,21.329 C30.819,21.329 34.708,25.218 34.708,30.016 C34.708,34.813 30.819,38.702 26.022,38.702 z M56.973,38.702 C54.211,38.702 51.635,40.03 48.886,43.395 C45.769,47.221 42.693,50.883 37.704,50.883 C33.477,50.883 31.376,49.151 29.417,47.888 C27.641,46.737 26.161,46.69 22.627,46.69 C20.185,46.69 16.957,51.834 15.054,56.898 L64.994,56.898 C62.763,46.137 58.946,39.052 56.973,38.802"],classes:[null,"accent"]},close:{origin:-2,size:24,paths:["M14.95 6.46L11.41 10l3.54 3.54-1.41 1.41L10 11.42l-3.53 3.53-1.42-1.42L8.58 10 5.05 6.47l1.42-1.42L10 8.58l3.54-3.53z"]}},a={home:function(){return r("home",i.home,!0)},close:function(){return r("close",i.close,!0)}};function r(n,i,a){var r=[],o=void 0!==i.origin?i.origin:0;return e.each(i.paths||[],(function(e,t){var n=i.colors&&i.colors[t]?" fill="+i.colors[t]:"",a=i.classes&&i.classes[t]?" class="+i.classes[t]:"";r.push(`<path d="${e}"${n}${a}></path>`)})),a?e.join(r,""):`<symbol viewBox="${o} ${o} ${i.size} ${i.size}" id="${t}${n}">\n\t\t\t\t${e.join(r,"")}\n\t\t\t</symbol>`}function o(r,o){if(!e.has(!0===o?i:a,r))return"";var d=function(t){return e.has(i,t)&&i[t].size?[void 0!==i[t].origin?i[t].origin:0,i[t].size]:[0,n]}(r),l=!0===o?`<use href="#${t}${r}"/>`:a[r]();return`<svg\n\t\t\t\tclass="${t}svg ${t}${r}"\n\t\t\t\trole="img"\n\t\t\t\taria-labelledby="title"\n\t\t\t\tviewBox="${d[0]} ${d[0]} ${d[1]} ${d[1]}"\n\t\t\t\tpreserveAspectRatio="xMidYMin slice"\n\t\t\t>\n\t\t\t\t${l}\n\t\t\t</svg>`}return{collection:function(){var a=[];return e.each(i||[],(function(i,o){a.push(e.isString(i)?function(e,i){return`<symbol viewBox="0 0 ${n} ${n}" id="${t}${e}"><path d="${i}"></path></symbol>`}(o,i):r(o,i))})),`<svg style="display:none;" xmlns="http://www.w3.org/2000/svg">${e.join(a,"")}</svg>`},svg:o,icon:function(e){return o(e,!0)}}},$m3=function(e,t,n,i,a){var r=i.prefix,o=e.options,d=r+"-tree",l=r+"-node",s=r+"-row",c=r+"-holder",u=r+"-expandable",f=r+"-item",p=r+"-icon",m="#"+d,v="> ."+l,h="."+s,g=`> .${s} > .${u}`,$=`> .${s} > .${p}`,b=`> .${s} > .${f}`,w="."+p;i.tree_item=f,a.tree=m;var x=t();function y(){return 0===(x=t(m)).length}function _(){var n=t(I(0,0,e.lang.rootTree||"Root",!0,!0));n.addClass("mfs-root").find(h).addClass("mfs-root-row").end().find(g).remove(),o.hide_root&&n.find(h).hide(),o.root_icon&&n.find($+" > div").html(e.$ic.svg("home")),x.append(n),G(0)}function C(e){return x.find(`li[data-id="${e}"]`)}function L(e,t){if(void 0!==t&&t.prevIndex!==t.nextIndex)if(-1===t.beforeId){var n=e.data("parent_id");e.prependTo(C(n).find(v))}else e.insertAfter(C(t.beforeId))}function k(e,t){if(!y()){var i=[];n.each(t||[],(function(t){i.push(I(t.id,t.parentId,t.name,t.id===e,0==t.children))})),C(e).find(h).after(`<ul class="${l}" style="display: none;">\n\t\t\t\t${n.join(i,"")}\n\t\t\t</ul>`),function(e){if(y())return;n.each(e||[],(function(e){G(e.id)}))}(t)}}function I(t,n,i,a,r){return`<li class="${"collapsed"+(!0===a?" selected":"")}" data-id="${t}" data-parent_id="${n}">\n\t\t\t\t<div class="${s}">\n\t\t\t\t\t<div class="${u}" data-id="${t}" data-parent_id="${n}" data-type="dir" ${`style="opacity:${r?0:1};"`}>\n\t\t\t\t\t\t<div class="${c}">${e.$ic.icon("minus")}${e.$ic.icon("plus")}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="${p} ${!0===a?"opened":"closed"}">\n\t\t\t\t\t\t<div class="${c}">${e.$ic.icon("opened")}${e.$ic.icon("closed")}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a href="#" class="${f}" data-id="${t}" data-parent_id="${n}" data-type="dir">${i}</a>\n\t\t\t\t</div>\n\t\t\t</li>`}function F(e){C(e).removeClass("wait").removeClass("collapsed").addClass("expanded").find(v).slideDown(o.anim_speed,o.anim_easing,(function(){t(this).trigger("afteropen"),t(this).trigger("afterupdate")}))}function M(e){C(e).removeClass("expanded").addClass("collapsed").find(v).slideUp(o.anim_speed,o.anim_easing,(function(){t(this).trigger("afterclose"),t(this).trigger("afterupdate")}))}function A(e){y()||(x.find("li").removeClass("selected"),x.find(w).removeClass("opened").addClass("closed"),C(e).addClass("selected").find($).removeClass("closed").addClass("opened"))}function z(e,t){C(e).find(g).css({opacity:t?1:0})}function G(n){C(n).find(b).unbind("click").bind("click",(function(n){n.preventDefault(),n.stopPropagation();var i=t(this).data("id");e.$ca.selected(i)})),C(n).find(g).unbind("click").bind("click",(function(e){e.preventDefault(),e.stopPropagation();var n=t(this).parents("li"),i=n.data("id");n.hasClass("collapsed")?F(i):M(i)}))}function B(t){for(var n=e.$ca.withParents();n;)F(n.id),n=n.parent;A(t)}return{init:function(){if(y()){var n=`${e.$ic.collection()}<ul id="${d}" class="${l}"></ul>`;e.isPost?t(".media-menu").append(n):t(a.browser).before(n),function(){if(y())return;_(),e.$ca.walk((function(e){k(e.id,e.children),z(e.id,null!==e.children&&e.children.length>0)})),e.$dd.updateTree(),B(o.selectedId||0)}()}},root:_,add:k,append:function(e,t,n,i,a){var r=I(e,t,n);(void 0===a?C(t).find(v):C(a).parent()).append(r),L(C(e),i),G(e)},remove:function(e){C(e).remove()},rename:function(e,t,n){var i=C(e);i.find(b).html(t),L(i,n)},wait:function(e){C(e).addClass("wait")},expand:F,collapse:M,select:A,open:B,icon:z,isWaiting:function(e){var t=C(e);return t.hasClass("expanded")||t.hasClass("wait")}}},$m4=function(e,t,n,i,a){var r=i.prefix+"-categories",o=i.prefix+"-media-category",d=`${a.frame} .${r}`,l=`${a.frame} select.${r} option`,s=null;function c(e){return t(`${l}[data-id="${e}"]`)}function u(){var n=t(d);e.$ca.walk((function(e){n.append(c(e.id))}))}function f(){var n=t(this).find("option:selected").data("id")||0;e.$ca.onChange(n)}return{remove:function(e){c(e).remove()},rename:function(t,n,i){c(t).html(e.options.category_shift.repeat(i.depth)+n),u()},move:u,select:function(e,n){t(l).prop("selected",!1);var i=c(e);i.prop("selected",!0),n&&i.parent().change()},refresh:function(i){t(d).find("option").each((function(){var n=t(this),i=n.val();n.attr("data-id",i),n.attr("data-parent_id",e.$ca.parentOf(i))})),u(),e.isGrid?(t(d).unbind("change",f).bind("change",f),function(i){if(i&&null!==s&&(s.disconnect(),s=null),null===s){var r=window.MutationObserver||window.WebKitMutationObserver;s=new r((function(e){var i=!1;e.forEach((function(e){-1===n.findIndex(e.addedNodes,d)&&-1===n.findIndex(e.removedNodes,d)||(i=!0)})),i&&t(a.attachments_wrapper).trigger("updated")}));var o=t(a.attachments_wrapper);if(0===o.length)return s.disconnect(),void(s=null);s.observe(o[0],{childList:!0,subtree:!0,attributes:!1,characterData:!1}),o.unbind("updated").bind("updated",(function(){e.$dd.updateItems()}))}function d(e){return e.tagName&&"li"===e.tagName.toLowerCase()&&n.includes(e.classList,"attachment")}}(i)):(e.$dd.updateItems(),t(d).change((function(){t(this).parents("form").submit()})))},destroy:function(){t(d).remove()},params:{name:r,id:o}}},$m5=function(e,t,n,i,a){var r=e.options.icons,o=i.prefix+"-folder",d=i.prefix+"-folder-preview",l=i.prefix+"-back",s="icon dashicons "+r.folder,c=i.prefix+"-folder-name",u=i.prefix+"-actions",f="__edit dashicons "+r.edit,p="__delete dashicons "+r.delete,m="__back icon dashicons "+r.back,v=`${a.frame} .${o}`,h="li."+o,g="."+l,$="."+d,b=`.${d} .icon`,w=`.${c} > div`,x="."+u,y=`.${u} .__edit`,_=`.${u} .__delete`;function C(e){return t(`${v}[data-id="${e}"]`)}function L(e,n){if(void 0!==n&&n.prevIndex!==n.nextIndex)if(-1===n.beforeId){var i=t(v).filter(g);0===i.length?e.prependTo(t(a.browser)):e.insertAfter(i)}else e.insertAfter(C(n.beforeId))}function k(n){var i=`<li class="${o} ${l}" data-id="${n}" style="display:none;">\n\t\t\t\t<div class="${d}">\n\t\t\t\t\t<div class="${m}"></div>\n\t\t\t\t\t<div class="${c}">\n\t\t\t\t\t\t<div>${e.lang.backButton}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</li>`;t(i).appendTo(t(a.browser)).fadeIn("fast"),F(n)}function I(e,n,i,r,l){i=void 0===i?0:i,t(a.browser).append(`<li class="${o}" data-id="${e}" data-parent_id="${i}" style="display:none;">\n\t\t\t\t<div class="${d}">\n\t\t\t\t\t<div class="${s}"></div>\n\t\t\t\t\t<div class="${c}">\n\t\t\t\t\t\t<div>${n}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="${u}">\n\t\t\t\t\t\t<span class="${f}"></span>\n\t\t\t\t\t\t<span class="${p}"></span>\n\t\t\t\t\t</div>\n\t\t\t\t </div>\n\t\t\t</li>`),L(C(e).fadeIn("fast"),l),r&&F(e)}function F(n){var i=t(void 0===n?v:`${v}[data-id="${n}"]`);i.unbind("click").bind("click",(function(n){n.preventDefault(),n.stopPropagation();var i=t(this);i.hasClass("ui-draggable-dragging")||i.parents(h).hasClass("ui-draggable-dragging")||e.$ca.selected(i.data("id"))})),i.find(y).unbind("click").bind("click",(function(n){n.preventDefault(),n.stopPropagation();var i=t(this).parents(h);e.$us.promptName(i.find(w).html(),(function(t){var n=i.data("id"),a=i.data("parent_id");e.$ax.editFolder(n,a,t)}))})),i.find(_).unbind("click").bind("click",(function(n){n.preventDefault(),n.stopPropagation();var i=t(this).parents(h),a=i.find(w).text();e.$us.confirmDelete(a,(function(){var t=i.data("id"),n=i.data("parent_id");e.$ax.deleteFolder(t,n)}))}))}return i.folder=o,a.folder=v,a.back=g,a.preview=$,a.preview_name=w,{add:I,addBack:k,rename:function(e,t,n){var i=C(e);i.find(w).html(t),L(i,n)},remove:function(e){C(e).fadeOut("fast",(function(){t(this).remove()}))},init:function(i){if(i&&0!==i.length){var a=t(v).not(g);n.each(i,(function(e,n){n<a.length?t(a[n]).attr("data-id",e.id).data("id",e.id).attr("data-parent_id",e.parentId).data("parent_id",e.parentId).find(w).html(e.name):I(e.id,e.name,e.parentId)})),F(),e.$dd.updateWithoutTree()}},clear:function(n,i){var a=0!==n,r=e.$ca.parentOf(n),o=t(v),d=o.filter(g);e.$dd.clean(o),o.length>(a?i+1:i)&&o.slice(a?i+1:i,o.length).fadeOut("fast",(function(){t(this).remove()})),!a&&d.length&&function(e){e.removeClass(l).find(".__back").removeClass().addClass(s).parent().append(`<div class="${u}">\n\t\t\t\t\t<span class="${f}"></span>\n\t\t\t\t\t<span class="${p}"></span>\n\t\t\t\t</div>`)}(d),a&&(0===o.length?k(r):function(t,n,i){n&&n.length?n.attr("data-id",t).data("id",t):i.attr("data-id",t).data("id",t).addClass(l).find(b).removeClass().addClass(m).end().find(w).html(e.lang.backButton).end().find(x).remove()}(r,d,o.first()))},bindClicks:F}},$m6=function(e,t,n){var i=e.isGrid?"ul.attachments":"table.wp-list-table",a=e.isGrid?".media-frame:visible":"",r={prefix:"mfs"},o={wrapper:".mfs-wrapper",browser:".mfs-browser",attachments_wrapper:i,attachments:e.isGrid?i+" .attachment":i+" td .media-icon",frame:a,table_icon:"td .media-icon"},d=`&nbsp;&nbsp;<span class="dashicons ${e.options.icons.breadcrumb}"/>&nbsp;&nbsp;`,l=`<span class="dashicons ${e.options.icons.home}"/>&nbsp;&nbsp;`;return{cs:r,ds:o,tree:$m3(e,t,n,r,o),cat:$m4(e,t,n,r,o),box:$m5(e,t,n,r,o),wrapAll:function(){var n=e.isGrid?t(a):t(document);if(0===n.find(".mfs-wrapper:visible .mfs-browser").length){n.find(".mfs-browser, .mfs-breadcrumb").remove(),n.find(e.isGrid?i:".tablenav.top").before('<ul class="mfs-browser"></ul>\n\t\t\t\t<div class="mfs-clear"></div>');var r=e.isGrid?i+", .mfs-browser, .mfs-clear":".mfs-browser, .mfs-clear";return n.find(r).wrapAll('<div class="mfs-wrapper"></div>'),n.find(".mfs-wrapper").prepend('<ul class="mfs-breadcrumb"></ul>'),!0}return!1},addButton:function(n){if(!e.isPost){var i=t();0===t("#mfs-add-folder").length&&(i=t(`<button\n\t\t\t\t\tid="mfs-add-folder"\n\t\t\t\t\ttype="button"\n\t\t\t\t\tclass="button media-button button-secondary${e.isGrid?"":" __table"}"\n\t\t\t\t\t>${e.lang.createFolder}</button>`),e.isGrid?t(a+" .media-frame-content .media-toolbar-secondary .spinner").before(i):t(".wp-filter .actions").after(i)),i.length&&t.isFunction(n)&&i.click(n)}},alterBreadcrumb:function(){for(var n=e.$ca.withParents(),i="",a=n.id;n;){var r=0===n.id?e.lang.rootTree:n.name,o=`<a data-id="${n.id}"${n.id===a?' class="selected"':""}">${r}</a>`;i=`<li>${0===n.id?l:d}${o}</li>${i}`,n=n.parent}t(".mfs-breadcrumb").html(null).prepend(i).find("a").click((function(){var n=t(this).data("id");e.$ca.selected(n)}))},inlineUploader:function(){function i(){var n=t(".media-frame .uploader-inline");n.length&&(n.css({marginTop:t(".mfs-browser").outerHeight(!0)+t(".mfs-breadcrumb").outerHeight(!0),opacity:1}),e.$de.log("?InlineUploader -> opacity: 1"))}e.isPost&&(t(window).resize(n.throttle(i,100)),i())},fixURL:function(){if(e.isGrid){var n=t(".media-grid-view-switch .view-list");if(n.length){var i=n.attr("href")||"",a=i.split("?");if(a.length>=2){for(var r=encodeURIComponent("zumedia_folders")+"=",o=a[1].split(/[&;]/g),d=o.length;d-- >0;)-1!==o[d].lastIndexOf(r,0)&&o.splice(d,1);i=a[0]+(o.length>0?"?"+o.join("&"):""),n.attr("href",i)}}}},moveAttachments:function(n){e.isGrid?t(".media-toolbar-mode-select .select-mode-toggle-button").click():(t.each(n.split(","),(function(e,n){t("#the-list #post-"+n).hide()})),t('#the-list input[name="media[]"]').prop("checked",!1))}}},$m7=function(e,t){var n=e.$ca,i=null,a=null,r=null,o=null,d=null,l={modal:!1,edit:!1};function s(){return void 0!==wp.media.frame}function c(){return s()?wp.media.frame.content.get():null}function u(e){var t=c(),n=e&&s()?wp.media.frame.library:null;return null!==t?t.collection||null:n||null}function f(e){e&&(o=i.AttachmentsBrowser),i.AttachmentsBrowser=e?r:o}function p(){t("#menu-item-gallery-edit").click()}function m(){var t={};n.walk((function(n,i){t[n.id]={text:e.options.category_shift.repeat(i)+n.name,props:{term_id:n.id,[e.query_marker]:!0}}})),this.filters=t}return String.prototype.repeat=function(e){var t="",n=this.valueOf();if(e<1)return t;for(;e>1;)1&e&&(t+=n),e>>=1,n+=n;return t+n},{init:function(){return"undefined"!=typeof wp&&void 0!==wp.media&&(i=wp.media.view,a=wp.media.controller,!0)},invalidateQuery:function(){var e=u(!0);null!==e&&e.props.set({updated:+new Date})},resetSelection:function(){var e=c(),t=null===e?void 0:e.options.selection;t&&t.reset()},addCategoryFilter:function(){null!==i&&(i.AttachmentFilters.Folders=null,i.AttachmentFilters.Folders=i.AttachmentFilters.extend({className:e.$do.cat.params.name+" attachment-filters",id:e.$do.cat.params.id,createFilters:m}),function(){function e(e){e.toolbar.set("media-folders",new i.AttachmentFilters.Folders({controller:e.controller,model:e.collection.props,priority:-75}).render())}null===r&&(r=i.AttachmentsBrowser),d?e(d):i.AttachmentsBrowser=i.AttachmentsBrowser.extend({createToolbar:function(){wp.media.model.Query.defaultArgs.filterSource="filter-attachment-category",r.prototype.createToolbar.apply(this,arguments),d=this,e(this)}})}())},onBrowserReady:function(){null!==i&&i.AttachmentsBrowser.prototype.on("ready",(function(){e.$do.fixURL(),e.refreshFolders()}))},onGalleryEditMode:function(){var e=wp.media.controller.GalleryEdit;wp.media.controller.GalleryEdit=wp.media.controller.GalleryEdit.extend({activate:function(){l.edit=!0,f(!0),e.prototype.activate.apply(this,arguments)},deactivate:function(){l.edit=!1,f(!1),e.prototype.deactivate.apply(this,arguments)}})},onUploaderEvents:function(){var t=wp.Uploader;void 0!==t&&void 0!==t.queue&&(t.queue.on("reset",(function(){var t=u();t&&t.trigger("reset",t),e.$ca.invalidate()})),t.queue.on("add",(function(e){var t=wp.media.frame.content;t&&("upload"===t.mode()&&t.mode("browse"),t.get("autoSelect")&&(t.get("selection").collection.add(e),wp.media.frame.trigger("library:selection:add")))})))},onModal:function(){var e=i.Modal;i.Modal=i.Modal.extend({open:function(){e.prototype.open.apply(this,arguments),l.modal=!0,!1===l.edit&&p()},close:function(){e.prototype.close.apply(this,arguments),l.modal=!1}})},onCollectionEdit:function(){var t=a.CollectionEdit;a.CollectionEdit=a.CollectionEdit.extend({activate:function(){e.$de.log("!CollectionEdit","activate"),t.prototype.activate.apply(this,arguments)},deactivate:function(){e.$de.log("!CollectionEdit","deactivate"),t.prototype.deactivate.apply(this,arguments)}})},extendLibrary:function(){if(null!==a){var t=wp.media.controller.Library;wp.media.controller.Library=wp.media.controller.Library.extend({refreshContent:function(){e.$de.log("!extendLibrary"),t.prototype.refreshContent.apply(this,arguments)}})}}}},$m8=function(e,t,n){var i=e.$do.cs,a=e.$do.ds,r=i.prefix+"-dragging-over",o=i.prefix+"-dragging-count",d=i.prefix+"-dragging-stack",l=i.folder,s=i.tree_item,c="."+o,u="."+s,f=a.frame,p=a.tree,m=a.wrapper,v=a.browser,h=a.attachments,g=a.attachments_wrapper,$=a.table_icon,b=a.folder,w=a.back,x=a.preview,y=a.preview_name,_={revert:!0,distance:1,containment:e.isGrid?".media-frame-content":"#posts-filter",start:function(e,n){k(n,!0),t(this).draggable("instance").offset.click=I(n.helper)},stop:function(e,t){k(t,!1)},drag:function(n,i){!function(n){var i=(e.isGrid?t(`${f} ${p}`):t(p)).add(u).hasClass("is-droppable");n.helper.toggleClass(r,i)}(i)},animate:{duration:200,easing:"swing"}};function C(e){if(void 0!==t.ui){var n=t(void 0===e?b:`${b}[data-id="${e}"]`).not(w);n.length>0&&(A(n,"draggable"),n.draggable({revert:_.revert,distance:_.distance,containment:_.containment,cursorAt:I(n),helper:"clone",drag:_.drag,start:_.start,stop:_.stop}))}}function L(i,a){if(void 0!==t.ui){var o=n.isNil(i)?[b,u]:[`${b}[data-id="${i}"]`,`${u}[data-id="${i}"]`],d=t(o[0]).not(w).add(a?null:o[1]);(d=d.add(n.isNil(i)&&!a?p:null)).length>0&&(A(d,"droppable"),d.droppable({hoverClass:"is-droppable",accept:function(n){if(t(this).is(p))return!0;var i=t(this).data("id");if(n.hasClass(l)){var a=n.data("id"),r=n.data("parent_id"),o=t(this).data("parent_id");return a!==i&&a!==o&&r!==i}return!(!n.hasClass("attachment")&&!n.hasClass("media-icon"))&&i!==e.$ca.id()},over:function(){F(this,!0)},out:function(){F(this,!1)},drop:function(i,a){var o=t(this);if(F(this,!1),!function(e,n){var i=t(p);if(e.is(i))return 0===i.children().find(".is-droppable").length&&n.helper.removeClass(r),!0;return!1}(o,a)){var d=o.data("id"),s=a.draggable.data("id");if(a.draggable.hasClass(l)){var c=a.draggable.find(y).html();M(null,a,(function(){e.$ax.moveFolder(s,c,d)}))}else{var u=a.helper.data("ids");if(void 0!==u){var f=t();n.each(n.split(u,","),(function(e){f=f.add(`${h}[data-id="${e}"]`)})),M(f,a,(function(){e.$ax.moveFiles(u,d)}))}}}}}))}}function k(i,a){function r(i,a,r){var o=n.isNil(r),d=o?a.data("id"):r,l=t(`${o?b:h}[data-id="${d}"]`);e.isTable&&(l=t(`${g} input[value="${d}"]`).parents("tr").find($)),l.not(a)[i?"addClass":"removeClass"]("is-dragging")}void 0===i.helper.data("ids")?r(a,i.helper):n.each(i.helper.data("ids").split(",")||[],(function(e){r(a,i.helper,e)}))}function I(e){var t=e.first().width(),n=e.first().height();return{top:Math.floor(t/2),left:Math.floor(n/2)}}function F(e,n){t(e).hasClass(s)&&t(e).prev().toggleClass("is-droppable",!!n)}function M(e,n,i){var a=n.helper.clone().appendTo(null===e?v:m);n.helper.hide(),null!==e?(e.find(".check").remove(),a.find(c).animate({opacity:0},{duration:_.animate.duration/2,easing:_.animate.easing,queue:!1,complete:function(){t(this).remove()}}),a.children().first().animate({width:0,height:0},{duration:_.animate.duration,easing:_.animate.easing,queue:!1,complete:function(){a.remove()}}),e.not(n.helper).animate({width:0},{duration:_.animate.duration,easing:_.animate.easing,queue:!1}).promise().done((function(){e.remove(),i()}))):a.find(x).animate({width:0,opacity:0},{duration:_.animate.duration,easing:_.animate.easing,queue:!1}).promise().done((function(){a.remove(),i()}))}function A(e,i){var a=n.isNil(e)?t(".ui-draggable").add(".ui-droppable").not(".ui-draggable-dragging"):e.not(".ui-draggable-dragging");void 0!==i&&"draggable"!==i||a.filter(".ui-draggable").draggable("destroy"),void 0!==i&&"droppable"!==i||a.filter(".ui-droppable").droppable("destroy")}return{clean:e.isPost?n.noop:A,update:e.isPost?n.noop:function(e){C(e),L(e)},updateTree:e.isPost?n.noop:function(){L()},updateWithoutTree:e.isPost?n.noop:function(){C(),L(null,!0)},updateItems:e.isPost?n.noop:function(){if(void 0!==t.ui){var n=t(h).not(".uploading");n.length>0&&(A(n,"draggable"),n.draggable({revert:_.revert,distance:_.distance,containment:_.containment,cursorAt:I(n),appendTo:m,helper:function(){var i=n.parents("tr").find('input[name="media[]"]:checked').parents("tr").find($),a=t(this).add(e.isGrid?n.filter(".selected"):i),r=[];return a.each((function(){var n=t(this).parents("tr").find('input[name="media[]"]').val();r.push(e.isGrid?t(this).data("id"):n)})),function(n,i){var a=n.first(),r=n.length>1?`<div class="${o}"><span>${n.length}</span></div>`:null,l=e.isGrid?n.find(".attachment-preview"):n,s=t("<div></div>").addClass("attachment").width(a.width()).height(a.height()).addClass(d).append(l.slice(0,3).clone()).append(r).wrapInner('<div><div class="__stack"></div></div>').data("ids",i.join(","));1===n.length&&s.addClass("__single");return s}(a,r)},drag:_.drag,start:_.start,stop:_.stop}))}}}},$m9=function(e,t,n){var i,a=e.$do,r=[],o={id:0,depth:0,parentId:0,name:e.categories[0].label},d=e.options.selectedId||0,l=null,s=[];function c(e){return n.sortBy(e,["name"])}function u(e,i,a,r,o){void 0===o&&(o={}),n.each(i,(function(d){if("delete"===e){if(d.id===a.id)return o.item=d,n.pull(i,d),0===i.length&&(r.children=null),!1;if(null!==d.children&&(u(e,d.children,a,d,o),void 0!==o.item))return!1}if("update"===e){if(d.id===a.id)return o.prevIndex=n.findIndex(i,{id:a.id}),n.merge(d,a),r.children=c(i),o.nextIndex=n.findIndex(r.children,{id:a.id}),o.beforeId=0===o.nextIndex?-1:r.children[o.nextIndex-1].id,!1;if(null!==d.children){if(o.depth++,u(e,d.children,a,d,o),void 0!==o.beforeId)return!1;o.depth--}}if("add"===e){if(d.id===a.parentId)return null===d.children&&(d.children=[]),d.children.push(n.merge({children:null},a)),d.children=c(d.children),o.nextIndex=n.findIndex(d.children,{id:a.id}),o.beforeId=0===o.nextIndex?-1:d.children[o.nextIndex-1].id,!1;if(null!==d.children&&(u(e,d.children,a,d,o),void 0!==o.beforeId))return!1}if("get"===e){if(d.id===a.id)return o.item=d,!1;if(null!==d.children){if(o.depth++,u(e,d.children,a,d,o),void 0!==o.item)return!1;o.depth--}}if("reverse"===e){if(d.id===a.id)return o.item=n.clone(d),o.item.parent=o.parent,!1;if(null!==d.children){var l=n.clone(d);if(l.parent=o.parent,o.parent=l,o.depth++,u(e,d.children,a,d,o),void 0!==o.item)return!1;o.depth--,o.parent=n.get(o.parent,"parent",null)}}"walk"===e&&(t.isFunction(o.callback)&&o.callback(d,o.depth),null!==d.children&&(o.depth++,u(e,d.children,a,d,o),o.depth--))}))}function f(e,t,n){var i={};return u("add",r,{id:e,parentId:n,name:t},null,i),i}function p(e){var t={};return u("delete",r,{id:e},null,t),t.item}function m(e,t){var n={depth:0};return u("get",r,{id:e},null,n),!0===t?n:n.item}function v(e){return!(!e||!e.children)&&e.children.length>0}function h(e,t){var i;return i=e,!n.isNaN(parseFloat(i))&&isFinite(i)&&(e=parseInt(e,10)),t=n.isNil(t)?g():t,n.isNil(e)?t:e}function g(){return d}function $(t,i){t=n.map(n.castArray(t),(function(e){return h(e)})),s=n.union(s,t),i&&e.$dd.updateItems()}function b(t){e.isGrid&&n.includes(s,t)&&(e.$wm.invalidateQuery(),n.pull(s,t))}return i=e.categories,r=[{id:0,parentId:0,name:e.lang.treeSelect||"No Categories",children:null}],n.each(i,(function(e){var t={id:e.id,parentId:e.parent_id,name:e.label};0!==e.id&&u("add",r,t,null,{})})),{add:function(t,n,i){var r=f(t,i,n);e.$do.cat.destroy(),e.$wm.addCategoryFilter(),e.$do.cat.refresh(),a.box.add(t,i,n,!0,r),a.tree.append(t,n,i,r),a.tree.icon(n,!0),a.tree.icon(t,!1),e.$dd.update(t)},create:function(){e.$us.promptName((function(t){e.$ax.addFolder(e.$ca.id(),t)}))},remove:function(t,n,i){p(t),a.cat.remove(t),a.box.remove(t),a.tree.remove(t),a.tree.icon(n,i?0:1),e.isGrid&&wp.Uploader.queue.reset()},rename:function(e,t){var n=function(e,t){var n={depth:0};return u("update",r,{id:e,name:t},null,n),n}(e,t);a.cat.rename(e,t,n),a.box.rename(e,t,n),a.tree.rename(e,t,n)},move:function(t,n){var i=p(t),r=f(i.id,i.name,n),o=m(i.parentId);a.box.remove(t),a.tree.remove(t),a.tree.append(t,n,i.name,r),a.cat.rename(t,i.name,r),a.tree.icon(n,!0),a.tree.icon(t,v(i)),a.tree.icon(o.id,v(o)),e.$dd.update(t)},moveItems:function(e,t){$([null,t]),a.moveAttachments(e)},get:m,walk:function(e){var t={callback:n.isFunction(e)?e:n.noop,depth:0};u("walk",r,{},null,t)},invalidate:$,id:g,parentOf:function(e){return e=h(e),null!==l&&l.id===e||(l=m(e)||o),l.parentId},withParents:function(e){return function(e,t){var n={depth:0,parent:null};return u("reverse",r,{id:e},null,n),!0===t?n:n.item}(e=h(e))},onChange:function(t){var n;t=h(t),n=h(n=t,0),d!==n&&(e.$ax.selectFolder(n),d=n),e.$wm.resetSelection(),b(t);var i=m(t);a.tree.init(t),a.box.clear(t,v(i)?i.children.length:0),a.box.init(i&&i.children),a.alterBreadcrumb(),a.tree.open(t),e.$dd.updateWithoutTree(),a.inlineUploader()},selected:function(e){var t=h(e);b(t),a.cat.select(t,!0)}}},$m10=function(e,t,n){var i=e.$ca;function a(i,a,o,d){n.merge(i,{nonce:e.ajax_nonce,action:"folders_action"}),t.ajax({type:"POST",url:e.ajaxurl,dataType:"json",data:i,beforeSend:t.isFunction(o)?o:n.noop,context:d}).done((function(e){!function(e,i){var a=n.get(e,"data");if(!0===n.get(a,"status"))return void(t.isFunction(i)&&i(a));r(a)}(e,a)})).fail((function(e,t,n){r({textStatus:t,errorThrown:n,jqXHR:e})}))}function r(t,i,a){n.isPlainObject(t)&&(i=n.has(t,"message")?t.message:"Unknown error",a=n.has(t,"params")?t.params:[],t=t.status||-1),n.isEmpty(a)||(i=`${i} [ ${n.isArray(a)?n.join(a,","):a} ]`),e.$us.notice(i,"error",!0)}function o(e){i.add(e.id,e.parent_id,e.name)}function d(e){i.rename(e.id,e.name)}function l(e){i.remove(e.id,e.parent_id,e.is_empty)}function s(e){i.move(e.id,e.receiving_id)}function c(e){i.moveItems(e.ids,e.receiving_id)}return{addFolder:function(e,t){a({operation:"add_folder",name:t,parent_id:e},o)},editFolder:function(e,t,n){a({operation:"edit_folder",id:e,name:n,parent_id:t},d)},deleteFolder:function(e,t){a({operation:"delete_folder",id:e,parent_id:t},l)},moveFolder:function(e,t,n){a({operation:"move_folder",id:e,name:t,receiving_id:n},s)},moveFiles:function(e,t){a({operation:"move_files",ids:e,receiving_id:t},c)},selectFolder:function(e){a({operation:"select_folder",id:e},null)}}},$m11=function(e,t,n){var i=e.$do.cs.prefix+"-dialog",a="#"+i;function r(r,o,d,l,s){var c=t(a);0===c.length&&(t("body").append(`<div id="${i}" style="display:none;"><div class="__wrapper"></div></div>`),c=t(a)),c.find(".__wrapper").html(o),c.hasClass("ui-dialog")&&c.dialog("destroy"),c.dialog({autoOpen:!0,title:r,modal:!0,resizable:!1,draggable:!1,closeText:e.$ic.svg("close"),focus:s||n.noop,buttons:[{text:d||"Ok",class:"mplus-button is-primary",click:function(){t(this).dialog("close"),n.isFunction(l)&&l(this)}},{text:"Cancel",class:"mplus-button is-secondary",click:function(){t(this).dialog("close")}}]})}return{confirmDelete:function(t,n){var i=e.lang.deleteAlert.replace("%s",`<strong>${t}</strong>`);r(e.lang.deleteFolder,i,e.lang.delete,n)},promptName:function(i,a){n.isFunction(i)&&(a=i,i=null);var o=n.isNil(i),d=`<div class="__field">\n\t\t\t\t<label class="__label" for="__text-control">${o?e.lang.createAlert:e.lang.renameAlert}</label>\n\t\t\t\t<input class="__input" type="text" id="__text-control" autofocus="true" value="${i||e.lang.createPrompt}">\n\t\t\t</div>`,l=function(e){var i=t(e).find("#__text-control").val();!n.isEmpty(i)&&n.isFunction(a)&&a(i)};r(o?e.lang.createFolder:e.lang.renameFolder,d,o?e.lang.create:e.lang.rename,l,(function(){var e=t(this);e.find("#__text-control").select().keydown((function(t){if(13===t.keyCode)return t.stopPropagation(),t.preventDefault(),e.dialog("close"),l(e),!1}))}))},notice:function(i,a,r){a=n.includes(["success","warning","error","info"],a)?a:"info"
;var o=(r=void 0===r||!!r)?'<button type="button" class="mplus-button mplus-notice__dismiss has-icon" aria-label="Dismiss this notice">\n\t\t\t\t<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="-2 -2 24 24" role="img" aria-hidden="true" focusable="false">\n\t\t\t\t\t<path d="M14.95 6.46L11.41 10l3.54 3.54-1.41 1.41L10 11.42l-3.53 3.53-1.42-1.42L8.58 10 5.05 6.47l1.42-1.42L10 8.58l3.54-3.53z"></path>\n\t\t\t\t</svg>\n\t\t\t</button>':"",d=n.uniqueId("mfs"),l=t(`<div id="${d}" class="mplus-notice is-${a}${r?" is-dismissible":""}">\n\t\t        <div class="mplus-notice__content">${i}</div>${o}\n\t\t    </div>`);0===t(".mplus-notice-list").length&&t(e.$do.ds.wrapper).before('<div class="mplus-notice-list"></div>'),t(".mplus-notice-list").append(l),r&&t(`#${d} button`).click((function(){t(this).parent().remove()}))}}};!function(e,t){var n={options:{hide_root:!1,root_icon:!1,icons:{edit:"dashicons-edit-large",delete:"dashicons-trash",back:"dashicons-editor-break",breadcrumb:"dashicons-arrow-right-alt2",home:"dashicons-admin-home",folder:"dashicons-images-alt"},category_shift:"&nbsp;&nbsp;&nbsp;",anim_speed:200,anim_easing:"swing"},lang:{createFolder:"Create Folder",backButton:"Back"},isTable:!1,isGrid:!1,isLibrary:!1,isPost:!1};"undefined"!=typeof zumedia_folders&&void 0!==zumedia_folders.data&&e.extend(!0,n,zumedia_folders.data),void 0!==n.categories&&(n.isLibrary="library"===n.page,n.isPost="post"===n.page,n.isGrid="grid"===n.viewmode,n.isTable="table"===n.viewmode,e.extend(n,{$de:$m1(t)}),e.extend(n,{$ic:$m2(t)}),e.extend(n,{$do:$m6(n,e,t)}),e.extend(n,{$ca:$m9(n,e,t)}),e.extend(n,{$wm:$m7(n,e,t)}),e.extend(n,{$dd:$m8(n,e,t)}),e.extend(n,{$ax:$m10(n,e,t)}),e.extend(n,{$us:$m11(n,e,t)}),n.refreshFolders=function(e){n.$do.wrapAll()&&(n.$do.addButton(n.$ca.create),n.$do.cat.refresh(e),n.$ca.selected())},e(document).ready((function(){!1!==n.$wm.init()&&(n.isGrid?(n.$wm.addCategoryFilter(),n.$wm.onBrowserReady(),n.$wm.onModal(),n.$wm.onGalleryEditMode(),n.$wm.onCollectionEdit(),n.$wm.onUploaderEvents()):n.$do.wrapAll()&&(n.$do.addButton(n.$ca.create),n.$do.cat.refresh(),n.$ca.onChange()))})))}(jQuery,lodash);